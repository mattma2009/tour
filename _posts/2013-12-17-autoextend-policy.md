---
layout: post
title:  弹性伸缩指标的选择
categories: [work]
tags: [paas]
---

最近，关于paas中应用动态伸缩的指标进行了不少讨论。最初聚焦在CPU、内存、连接数等指标：

从CPU的维度看，传统的IAAS以及传统的监控模式，CPU使用率作为一个关键指标。在PAAS中，当应用使用共享CPU的模式，占用率不能作为伸缩指标；当采用容器技术（cgroup）,把CPU和内存进行完全隔离的情况下，具备参考意义；但是当CPU高，真的需要扩展吗？其实不一定。再看内存，其实内存和CPU的评估有点类似，有参考意义但不是决定因素，可能CPU、内存就是高，但是应用跑的没有问题呀。

回到问题的根源，伸缩的目的是什么？在保证服务质量的前提下，尽量节省成本。所以，评估应用是否需要伸缩的根本，在于应用的服务质量即（SLA）。我们评估一个应用的服务质量的指标有哪些呢？应用/服务的平均响应时间，成功率等；所以就算CPU、内存都高，但是影响用户体验的平均响应达到了指标，成功率达到了指标，就没有必要进行扩展；另外，根据应用类型不同，可能本身就有高CPU和高IO之分，所以仅仅依靠一些传统的指标，无法考查应用的实际情况；因此，以应用服务质量的指标，看似是比较合理的。后续验证一下吧。